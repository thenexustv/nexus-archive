---
import "../styles/global.css";
import { SITE_NAME } from "../data";

interface Props {
  title?: string;
  description?: string;
  ogType?: string;
  canonicalUrl?: string;
  feeds?: { title: string; url: string }[];
}

const { title, description, ogType = "website", canonicalUrl, feeds } = Astro.props;
const pageTitle = title ? `${title} › ${SITE_NAME}` : `${SITE_NAME} › Podcasts from the Technological Convergence`;
const pageDescription = description ?? "Archive of thenexus.tv podcasts";
const ogUrl = canonicalUrl ?? Astro.url.href;
---

<!doctype html>
<html lang="en">
  <head>
    <!--

      ___           ___           ___                    ___           ___           ___           ___           ___
     /\  \         /\__\         /\  \                  /\__\         /\  \         |\__\         /\__\         /\  \
     \:\  \       /:/  /        /::\  \                /::|  |       /::\  \        |:|  |       /:/  /        /::\  \
      \:\  \     /:/__/        /:/\:\  \              /:|:|  |      /:/\:\  \       |:|  |      /:/  /        /:/\ \  \
      /::\  \   /::\  \ ___   /::\~\:\  \            /:/|:|  |__   /::\~\:\  \      |:|__|__   /:/  /  ___   _\:\~\ \  \
     /:/\:\__\ /:/\:\  /\__\ /:/\:\ \:\__\          /:/ |:| /\__\ /:/\:\ \:\__\ ____/::::\__\ /:/__/  /\__\ /\ \:\ \ \__\
    /:/  \/__/ \/__\:\/:/  / \:\~\:\ \/__/          \/__|:|/:/  / \:\~\:\ \/__/ \::::/~~/~    \:\  \ /:/  / \:\ \:\ \/__/
   /:/  /           \::/  /   \:\ \:\__\                |:/:/  /   \:\ \:\__\    ~~|:|~~|      \:\  /:/  /   \:\ \:\__\
   \/__/            /:/  /     \:\ \/__/                |::/  /     \:\ \/__/      |:|  |       \:\/:/  /     \:\/:/  /
                   /:/  /       \:\__\                  /:/  /       \:\__\        |:|  |        \::/  /       \::/  /
                   \/__/         \/__/                  \/__/         \/__/         \|__|         \/__/         \/__/

    Constructed by Ryan Rampersad. Originally at thenexus.tv, now preserved as an archive.

    -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="light dark" />
    <meta name="description" content={pageDescription} />
    <meta property="og:title" content={pageTitle} />
    <meta property="og:description" content={pageDescription} />
    <meta property="og:type" content={ogType} />
    <meta property="og:url" content={ogUrl} />
    <title>{pageTitle}</title>
    <link rel="icon" href="/favicon.ico" sizes="16x16" />
    <link rel="icon" type="image/png" href="/icon-192.png" sizes="192x192" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />
    {feeds?.map((feed) => (
      <link rel="alternate" type="application/rss+xml" title={feed.title} href={feed.url} />
    ))}
  </head>
  <body
    data-universe
    class="bg-white dark:bg-stone-950 text-gray-900 dark:text-stone-100 min-h-screen flex flex-col"
  >
    <header
      class="group border-b border-gray-200 dark:border-stone-800 bg-gray-50 dark:bg-stone-900"
    >
      <nav
        class="max-w-5xl mx-auto px-4 py-3 flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-6"
      >
        <a
          href="/"
          class="flex items-center gap-2 hover:opacity-80 transition-opacity"
        >
          <img
            src="/images/nx-logo.png"
            alt=""
            width="28"
            height="28"
            id="nx-logo"
            class="flex-shrink-0 grayscale group-hover:grayscale-0 transition-[filter] duration-300"
          />
          <span
            class="font-league text-2xl sm:text-4xl uppercase tracking-wide text-gray-900 dark:text-stone-100"
            >THE NEXUS<span class="sr-only">.tv</span></span
          >
        </a>
        <div class="flex flex-wrap gap-x-4 gap-y-1 text-sm sm:ml-auto">
          <a
            href="/about/"
            class="text-gray-600 dark:text-stone-400 hover:text-gray-900 dark:hover:text-stone-100"
            >About</a
          >
          <a
            href="/episodes/"
            class="text-gray-600 dark:text-stone-400 hover:text-gray-900 dark:hover:text-stone-100"
            >Episodes</a
          >
          <a
            href="/series/"
            class="text-gray-600 dark:text-stone-400 hover:text-gray-900 dark:hover:text-stone-100"
            >Series</a
          >
          <a
            href="/people/"
            class="text-gray-600 dark:text-stone-400 hover:text-gray-900 dark:hover:text-stone-100"
            >People</a
          >
          <a
            href="/licenses/"
            class="text-gray-600 dark:text-stone-400 hover:text-gray-900 dark:hover:text-stone-100"
            >Licenses</a
          >
          <a
            href="/contact/"
            class="text-gray-600 dark:text-stone-400 hover:text-gray-900 dark:hover:text-stone-100"
            >Contact</a
          >
        </div>
      </nav>
    </header>

    <main data-galaxy class="max-w-5xl mx-auto px-4 py-8 flex-1 w-full">
      <slot />
    </main>

    <footer
      class="border-t border-gray-200 dark:border-stone-800 bg-gray-50 dark:bg-stone-900 mt-auto"
    >
      <div
        class="max-w-5xl mx-auto px-4 py-8 text-sm text-gray-500 dark:text-stone-400 text-center"
      >
        <div class="flex flex-wrap justify-center gap-4">
          <a
            href="/about/"
            class="hover:text-gray-700 dark:hover:text-stone-300">About</a
          >
          <a
            href="/series/"
            class="hover:text-gray-700 dark:hover:text-stone-300">Shows</a
          >
          <a
            href="/people/"
            class="hover:text-gray-700 dark:hover:text-stone-300">People</a
          >
          <a
            href="/licenses/"
            class="hover:text-gray-700 dark:hover:text-stone-300">Licenses</a
          >
          <a
            href="/contact/"
            class="hover:text-gray-700 dark:hover:text-stone-300">Contact</a
          >
        </div>

        <p class="mt-4">
          &copy; <span data-year>2026</span> — <a
            href="/"
            class="hover:text-gray-700 dark:hover:text-stone-300">The Nexus</a
          >
        </p>

        <div class="mt-6">
          <img
            src="/images/nx-logo.png"
            alt=""
            width="64"
            height="64"
            class="nx-footer-logo mx-auto"
          />
        </div>
      </div>
    </footer>

    <script>
      const logo = document.getElementById("nx-logo");
      if (logo) {
        setTimeout(
          () => {
            logo.classList.add("nx-idle-spin");
          },
          1000 * 60 * 2.43,
        );
      }

      const yearEl = document.querySelector("[data-year]");
      if (yearEl) yearEl.textContent = new Date().getFullYear().toString();
    </script>
  </body>
</html>
